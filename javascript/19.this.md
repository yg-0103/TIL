## this



### 1. this í‚¤ì›Œë“œ

ë©”ì„œë“œëŠ” í”„ë¡œí¼í‹°ë¥¼ ì°¸ì¡°í•˜ê³  ë³€ê²½í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ì´ë•Œ ë©”ì„œë“œê°€ ìì‹ ì´ ì†í•œ ê°ì²´ì˜ í”„ë¡œí¼í‹°ë¥¼ ì°¸ì¡°í•˜ë ¤ë©´ ìì‹ ì´ ì†í•œ ê°ì²´ë¥¼ ê°€ë¥´í‚¤ëŠ” ì‹ë³„ìë¥¼

ì°¸ì¡°í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.

```javascript
const circle = {
  radius: 5,
  getDiameter() {
    // ìì‹ ì´ ì†í•œ ê°ì²´ì¸ circleì„ ì°¸ì¡°í•  ìˆ˜ ìˆì–´ì•¼í•œë‹¤.
    return 2 * circle.radius;
  }
};

console.log(circle.getDiameter()); // 10
```

ìœ„ ê°ì²´ ë¦¬í„°ëŸ´ì€ circle ë³€ìˆ˜ì— í• ë‹¹ë˜ê¸° ì§ì „ í‰ê°€ëœë‹¤. ë”°ë¼ì„œ getDiameter ë©”ì„œë“œê°€ í˜¸ì¶œë˜ëŠ” ì‹œì ì—ëŠ” ì´ë¯¸ ê°ì²´ê°€ ìƒì„±ë˜ì—ˆê³  circle ì‹ë³„ìì— ì—°ê²°

ë˜ì—ˆê¸° ë•Œë¬¸ì— ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ circle ì‹ë³„ìë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.

í•˜ì§€ë§Œ ì¬ê·€ì ìœ¼ë¡œ ì°¸ì¡°í•˜ëŠ” ë°©ì‹ì€ ì¼ë°˜ì ì´ì§€ ì•Šë‹¤.

```javascript
function Circle(radius)|{
  // ì´ì‹œì ì—ëŠ” ìì‹ ì´ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì‹ë³„ìë¥¼ ì•Œ ìˆ˜ ì—†ë‹¤.
  ???.radius = radius;
}

Circle.prototype.getDiameter = function() {
  return 2 * ???.radius;
};
```

ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ í”„ë¡œí¼í‹° ë˜ëŠ” ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ê¸° ìœ„í•´ì„  ìì‹ ì´ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆì–´ì•¼í•œë‹¤. í•˜ì§€ë§Œ ìƒì„±ìí•¨ìˆ˜ë¥¼ ì •ì˜í•˜ëŠ” ì‹œì ì—ëŠ”

ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê¸° ì „ì´ë¯€ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì‹ë³„ìë¥¼ ì•Œìˆ˜ ì—†ë‹¤. ì´ ë•Œë¬¸ì— ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ìê¸° ì°¸ì¡° ë³€ìˆ˜ thisë¥¼ ì œê³µí•œë‹¤. thisëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸

ì—”ì§„ì— ì˜í•´ ì•”ë¬µì ìœ¼ë¡œ ìƒì„±ë˜ë©° ì–´ë””ì„œë“  ì°¸ì¡° ê°€ëŠ¥í•˜ë‹¤. í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì•”ë¬µì ìœ¼ë¡œ í•¨ìˆ˜ ë‚´ë¶€ì— argumentsê°ì²´ì™€ thisê°€ ì „ë‹¬ëœë‹¤.

ì´ë•Œ thisê°€ ê°€ë¦¬í‚¤ëŠ” ê°’, ì¦‰ this ë°”ì¸ë”©ì€ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ë°©ì‹ì— ì˜í•´ ë™ì ìœ¼ë¡œ ê²°ì •ëœë‹¤.

```javascript
// ë©”ì„œë“œ ë‚´ë¶€ì˜ thisëŠ” í˜¸ì¶œí•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
const circle = {
  radius: 5,
  getDiameter() {
    return 2 * this.radius;
  }
};

console.log(circle.getDiameter()); // 10

// ìƒì„±ì í•¨ìˆ˜ì˜ thisëŠ” ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
function Circle(radius) {
  this.radius = radius;
}

Circle.prototype.getDiameter = function() {
  return 2 * this.radius;
}

const circle = new Circle(5);

console.log(circle.getDiameter()); // 10

// thisëŠ” ì–´ë””ì„œë“  ì°¸ì¡° ê°€ëŠ¥í•˜ë‹¤.

console.log(this); // window  ë¸Œë¼ìš°ì € í™˜ê²½ì¼ ê²½ìš°

function square(number) {
  // ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œë  ê²½ìš° ë‚´ë¶€ì˜ this ëŠ” ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
  console.log(this); // window
  return number * number;
}

square(2);

const person = {
  name: 'Lee',
  getName() {
    console.log(this); // {name: 'Lee', getName: f} ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
    return this.name;
  }
};
console.log(person.getName()); // "Lee"

function Person(name){
  this.name = name;
  //ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ thisëŠ” ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤
  console.log(this); // Person {name: "Lee"}
}

const me = new Person('Lee');
```

thisëŠ” ê°ì²´ì˜ í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œë¥¼ ì°¸ì¡°í•˜ê¸° ìœ„í•œ ìê¸° ì°¸ì¡° ë³€ìˆ˜ì´ë¯€ë¡œ ê°ì²´ì˜ ë©”ì„œë“œ ë˜ëŠ” ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì—ì„œë§Œ ì˜ë¯¸ê°€ ìˆë‹¤.



### 2. í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ê³¼ this ë°”ì¸ë”©

this ë°”ì¸ë”©ì€ í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ê²°ì •ëœë‹¤.

###### ğŸ“Œë ‰ì‹œì»¬ ìŠ¤ì½”í”„ì™€ this ë°”ì¸ë”©ì€ ê²°ì • ì‹œê¸°ê°€ ë‹¤ë¥´ë‹¤.

> í•¨ìˆ˜ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê²°ì •í•˜ëŠ” ë°©ì‹ì¸ ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ëŠ” í•¨ìˆ˜ ê°ì²´ê°€ ìƒì„±ë˜ëŠ” ì‹œì ì— ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê²°ì •í•œë‹¤. 
>
> this ë°”ì¸ë”©ì€ í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ì— ë”°ë¼ ë°”ë€Œê¸° ë•Œë¬¸ì— í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ì‹œì ì— ê²°ì •ëœë‹¤.

í•¨ìˆ˜ì˜ í˜¸ì¶œ ë°©ì‹

- ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ
- ë©”ì„œë“œ í˜¸ì¶œ
- ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œ
- Function.prototype.apply / call / bind ë©”ì„œë“œì— ì˜í•œ ê°„ì ‘ í˜¸ì¶œ

```javascript
const foo = function() {
  console.dir(this);
};

// ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ
// ì „ì—­ ê°ì²´ ë¸Œë¼ìš°ì € ì¼ê²½ìš° window
foo(); 

// ë©”ì„œë“œ í˜¸ì¶œ
// í˜¸ì¶œí•œ ê°ì²´
const obj = { foo };
obj.foo(); // obj  { foo: f}

// ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œ
// ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤
new foo(); // foo {}

// Function.prototype.apply / call / bind ë©”ì„œë“œë¡œ ê°„ì ‘ í˜¸ì¶œ
// this ëŠ” ì¸ìˆ˜ì— ì˜í•´ ê²°ì •
const bar = { name: 'bar' };

foo.call(bar); // bar
foo.apply(bar); // bar
foo.bind(bar)(); // bar
```



### 3. ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ

```javascript
function foo() {
  console.log('foo', this); // window
  function bar(){
    console.log('bar', this); // windw
  }
  bar();
}

foo();
```

ì „ì—­ í•¨ìˆ˜ëŠ” ë¬¼ë¡  ì¤‘ì²© í•¨ìˆ˜ë„ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œë˜ë©´ í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”©ëœë‹¤.

strict modeê°€ ì ìš©ëœ ì¼ë°˜ í•¨ìˆ˜ ë‚´ë¶€ì˜ this ì—ëŠ” undefinedê°€ ë°”ì¸ë”©ëœë‹¤.

```javascript
// ë©”ì„œë“œ ë‚´ì—ì„œ ì •ì˜í•œ ì¤‘ì²© í•¨ìˆ˜ë„ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œë˜ë©´ ì¤‘ì²© í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”© ëœë‹¤.
var value = 1; // varë¡œ ì„ ì–¸í•œ ë³€ìˆ˜ëŠ” ì „ì—­ ê°ì²´ì˜ í”„ë¡œí¼í‹°ê°€ ëœë‹¤.

const obj = {
  value: 100,
  foo(){
    console.log('foo', this); //{ value: 100, foo: f }
    console.log('foo.value', this.value); // 100
    
    // ë©”ì„œë“œ ë‚´ë¶€ì˜ ì¤‘ì²© í•¨ìˆ˜
    function bar() {
      console.log('bar', this); // window
      console.log('bar.value', this.value); // 1
    }
    bar(); // ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œ
  }
};

obj.foo()

// ì½œë°± í•¨ìˆ˜ê°€ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œë˜ë©´ ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì˜ thisì—ë„ ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”©ëœë‹¤.

var value = 1;

const obj = {
  value: 100,
  foo(){
    console.log('foo', this); // { value: 100, foo: f }
    
    setTimeout(function(){
      console.log('callback', this); // window
      console.oog('callback.value', this.value); // 1
    }, 100);
  }
};

obj.foo();

```

ì´ì²˜ëŸ¼ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œëœ ëª¨ë“  í•¨ìˆ˜ì˜ ë‚´ë¶€ì˜ thisì—ëŠ” ì „ì—­ ê°ì²´ê°€ ë°”ì¸ë”©ëœë‹¤.

í•˜ì§€ë§Œ í•¨ìˆ˜ì¸ ë©”ì„œë“œì™€ ì¤‘ì²© í•¨ìˆ˜ ë˜ëŠ” ì½œë°± í•¨ìˆ˜ì˜ ë‚´ë¶€ thisê°€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì€ ì¤‘ì²© í•¨ìˆ˜ì™€ ì½œë°± í•¨ìˆ˜ê°€ í—¬í¼ í•¨ìˆ˜ë¡œì„œ ë™ì‘í•˜ëŠ” ê²ƒì„ ì–´ë µê²Œ

ë§Œë“ ë‹¤.

```javascript
// thisë¥¼ ì¼ì¹˜ì‹œí‚¤ê¸° ìœ„í•œ ë°©ë²•
var value = 1;

const obj = {
  value: 100,
  foo() {
    const that = this; // thisë¥¼ ë³€ìˆ˜ì— ë‹´ëŠ”ë‹¤.
    
		setTimeout(function(){
      console.log(that.value); // 100
    }, 100);
  }
};

obj.foo();

const obj2 = {
  value: 100,
  foo(){
    // Function.prototype ë©”ì„œë“œ í™œìš©
    setTimeout(function(){
      console.log(this.value); // 100
    }.bind(this), 100);
  }
};

obj2.foo();

const obj3 = {
  value: 100,
  foo(){
    // í™”ì‚´í‘œ í•¨ìˆ˜ì˜ thisëŠ” ìƒìœ„ ìŠ¤ì½”í”„ì˜ thisë¥¼ ê°€ë¦¬í‚¨ë‹¤
    setTimeout(()=> console.log(this.value), 100); // 100
    
  }
};

obj3.foo();
```



### 4. ë©”ì„œë“œ í˜¸ì¶œ

ë©”ì„œë“œ ë‚´ë¶€ì˜ thisëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œ í•œê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤. ì£¼ì˜í•  ê²ƒì€ ë©”ì„œë“œë¥¼ ì†Œìœ í•œ ê°ì²´ê°€ ì•„ë‹Œ í˜¸ì¶œí•œ ê°ì²´ì— ë°”ì¸ë”© ëœë‹¤ëŠ” ê²ƒì´ë‹¤.

```javascript
const person = {
  name: 'Lee',
  getName() {
    return this.name;
  }
};

console.log(person.getName()); // "Lee"
```

<img src="https://poiemaweb.com/assets/fs-images/22-1.png" alt="22-1" style="zoom:50%;" />



person ë‚´ë¶€ì˜ getNameí”„ë¡œí¼í‹°ê°€ ê°€ë¦¬í‚¤ëŠ” í•¨ìˆ˜ëŠ” personì— í¬í•¨ëœ ê²ƒì´ ì•„ë‹ˆë¼ ë…ë¦½ì ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” ë³„ë„ì˜ ê°ì²´ë‹¤. ë‹¤ë§Œ getNameì´ë¼ëŠ” 

í”„ë¡œí¼í‹° í‚¤ê°€ í•¨ìˆ˜ ê°ì²´ë¥¼ ê°€ë¦¬í‚¬ ë¿ì´ë‹¤.

```javascript
const anotherPerson = {
  name: 'Kim'
};

anotherPerson.getName = person.getName;
console.log(anotherPerson.getName()); // "Kim"

const getName = person.getName;

console.log(getName()); // ì¼ë°˜í•¨ìˆ˜ë¡œ í˜¸ì¶œí•˜ë©´ ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
```

<img src="https://poiemaweb.com/assets/fs-images/22-2.png" alt="22-2" style="zoom:48%;" />



```javascript
function Person(name){
  this.name = name;
}

Person.prototype.getName = function() {
  return this.name;
};

const me = new Person('Lee');

console.log(me.getName()); // "Lee"

Person.prototype.name = 'kim';

console.log(Person.prototype.getName()); // "Kim"
```

<img src="https://poiemaweb.com/assets/fs-images/22-3.png" alt="22-3" style="zoom:50%;" />



### 5. ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œ

```javascript
function Circle(radius) {
  this.radius = radius;
  this.getDiameter = function() {
    return 2 * this.radius;
  };
}

const circle1 = new Circle(5);

const circle2 = new Circle(10);

console.log(circle1.getDiameter()); // 10
console.log(circle2.getDiameter()); // 20

// ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œ
const circle3 = Circle(15);

console.log(circle3); // undefined

console.log(radius); // 15  ì „ì—­ ê°ì²´ì˜ í”„ë¡œí¼í‹°ê°€ ëœë‹¤
```



### 6. Function.prototype.apply / call / bind ë©”ì„œë“œì— ì˜í•œ ê°„ì ‘ í˜¸ì¶œ

```javascript
function getThisBinding() {
  return this;
}

// thisë¡œ ì‚¬ìš©í•  ê°ì²´
const thisArg = { a: 1 };

console.log(getThisBinding()); // ì „ì—­ ê°ì²´

// ì „ë‹¬í•œ ê°ì²´ë¥¼ í•¨ìˆ˜ì˜ thisì— ë°”ì¸ë”©í•œë‹¤
console.log(getThisBinding.call(thisArg)); // { a: 1 }
console.log(getThisBinding.apply(thisArg)); // { a: 1 }

// apply ì™€ call ë©”ì„œë“œëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ì „ë‹¬í•œ ê°ì²´ë¥¼ í•¨ìˆ˜ì˜ thisì— ë°”ì¸ë”© í•œë‹¤.
// í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ì¸ìˆ˜ë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ë²•
function getThisBinding() {
  console.log(arguments);
  return this;
}

const thisArg = { a: 1 };

// apply ë©”ì„œë“œëŠ” ì¸ìˆ˜ë¥¼ ë°°ì—´ë¡œ ë¬¶ì–´ ì „ë‹¬í•œë‹¤.
console.log(getThisBinding.apply(thisArg, [1,2,3])); 
// Arguments(3) [1, 2, 3, callee: Æ’, Symbol(Symbol.iterator): Æ’]
// {a: 1}

// call ë©”ì„œë“œëŠ” ì¸ìˆ˜ë¥¼ ì‰¼í‘œë¡œ êµ¬ë¶„í•œ ë¦¬ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œ ì „ë‹¬í•œë‹¤
console.log(getThisBinding.call(thisArg, 1, 2, 3));
// Arguments(3) [1, 2, 3, callee: Æ’, Symbol(Symbol.iterator): Æ’]
// {a: 1}

// arguments ê°™ì€ ìœ ì‚¬ ë°°ì—´ ê°ì²´ëŠ” applyì™€ callì„ ì´ìš©í•´ Array.prototype ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
function convertArgsToArray() {
  console.log(arguments);
  
  // Array.prototype.slice ë§¤ì„œë“œë¥¼ ì¸ìˆ˜ ì—†ì´ í˜¸ì¶œí•˜ë©´ ë°°ì—´ì˜ ë³µì‚¬ë³¸ì„ ìƒì„±í•œë‹¤.
  const arr = Array.prototype.call(arguments);
  
  console.log(arr);
  
  return arr;
}

convertArgsToArray(1,2,3); // [1, 2, 3]

// bind ë©”ì„œë“œëŠ” ë©”ì„œë“œì˜ thisì™€ ë‚´ë¶€ ì¤‘ì²© í•¨ìˆ˜ ë˜ëŠ” ì½œë°± í•¨ìˆ˜ì˜ thisê°€ ë¶ˆì¼ì¹˜í•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í• ë•Œ ìœ ìš©í•˜ë‹¤.

const person = {
  name: 'Lee',
  foo(callback){
    console.log(this); // í˜¸ì¶œí•œ ê°ì²´ ì¦‰ personì„ ê°€ë¦¬í‚¨ë‹¤.
    setTimeout(callback, 100);
  }
};

person.foo(function(){
  console.log(this.name); // ë¸Œë¼ìš°ì € í™˜ê²½ì€ ë¹ˆ ë¬¸ìì—´, Node.jsëŠ” undefined
});

const person = {
  name: 'Lee',
  foo(callback){
    setTimeout(callback.bind(this), 100); // thisë¥¼ ì „ë‹¬
  }
};

person.foo(function(){
  console.log(this.name); // "Lee"
});

```

| í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹                                             | this ë°”ì¸ë”©                                                  |
| :--------------------------------------------------------- | :----------------------------------------------------------- |
| ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ                                             | ì „ì—­ ê°ì²´                                                    |
| ë©”ì„œë“œ í˜¸ì¶œ                                                | ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´                                         |
| ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œ                                           | ìƒì„±ì í•¨ìˆ˜ê°€ (ë¯¸ë˜ì—) ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤                       |
| Function.prototype.apply/call/bind ë©”ì„œë“œì— ì˜í•œ ê°„ì ‘ í˜¸ì¶œ | Function.prototype.apply/call/bind ë©”ì„œë“œì— ì²« ë²ˆì§¸ ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ ê°ì²´ |

